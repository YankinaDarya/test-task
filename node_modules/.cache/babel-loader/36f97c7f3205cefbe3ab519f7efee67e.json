{"ast":null,"code":"import _objectSpread from \"/home/daria/table/test-task/node_modules/@babel/runtime/helpers/esm/objectSpread2\";\nimport { dataAPI } from '../api/api';\nconst SET_DATA = 'SET_DATA';\nconst SET_KEYS = 'SET_KEYS';\nconst DIRECT_SORT = 'DIRECT_SORT';\nconst REVERSED_SORT = 'REVERSED_SORT';\nconst INITIALIZED_SUCCESS = 'INITIALIZED_SUCCESS';\nconst initialState = {\n  profiles: [],\n  keys: [],\n  initialized: false\n};\n\nconst reducer = (state = initialState, action) => {\n  switch (action.type) {\n    case SET_DATA:\n      return _objectSpread({}, state, {\n        profiles: action.data\n      });\n\n    case SET_KEYS:\n      return _objectSpread({}, state, {\n        keys: action.keys\n      });\n\n    case INITIALIZED_SUCCESS:\n      return _objectSpread({}, state, {\n        initialized: true\n      });\n\n    case DIRECT_SORT:\n      return _objectSpread({}, state, {\n        profiles: [...state.profiles.sort((a, b) => a[action.key].toLowerCase() > b[action.key].toLowerCase() ? 1 : b[action.key].toLowerCase() > a[action.key].toLowerCase() ? -1 : 0)]\n      });\n\n    case REVERSED_SORT:\n      return _objectSpread({}, state, {\n        profiles: [...state.profiles.sort((a, b) => b[action.key].toLowerCase() > a[action.key].toLowerCase() ? 1 : a[action.key].toLowerCase() > b[action.key].toLowerCase() ? -1 : 0)]\n      });\n\n    default:\n      return state;\n  }\n};\n\nexport default reducer;\nexport const getProfiles = () => dispatch => {\n  return dataAPI.getData().then(response => {\n    if (response.status === 200) {\n      dispatch(setKeys(Object.keys(response.data[0])));\n      dispatch(setData(response.data));\n    }\n  });\n};\nexport const initializeApp = () => dispatch => {\n  const promise = dispatch(getProfiles());\n  Promise.all([promise]).then(() => {\n    dispatch(initializedSuccess());\n  });\n};","map":{"version":3,"sources":["/home/daria/table/test-task/src/redux/reducer.js"],"names":["dataAPI","SET_DATA","SET_KEYS","DIRECT_SORT","REVERSED_SORT","INITIALIZED_SUCCESS","initialState","profiles","keys","initialized","reducer","state","action","type","data","sort","a","b","key","toLowerCase","getProfiles","dispatch","getData","then","response","status","setKeys","Object","setData","initializeApp","promise","Promise","all","initializedSuccess"],"mappings":";AAAA,SAASA,OAAT,QAAwB,YAAxB;AAEA,MAAMC,QAAQ,GAAG,UAAjB;AACA,MAAMC,QAAQ,GAAG,UAAjB;AACA,MAAMC,WAAW,GAAG,aAApB;AACA,MAAMC,aAAa,GAAG,eAAtB;AACA,MAAMC,mBAAmB,GAAG,qBAA5B;AAEA,MAAMC,YAAY,GAAG;AACnBC,EAAAA,QAAQ,EAAE,EADS;AAEnBC,EAAAA,IAAI,EAAE,EAFa;AAGnBC,EAAAA,WAAW,EAAE;AAHM,CAArB;;AAMA,MAAMC,OAAO,GAAG,CAACC,KAAK,GAAGL,YAAT,EAAuBM,MAAvB,KAAkC;AAChD,UAAQA,MAAM,CAACC,IAAf;AACE,SAAKZ,QAAL;AACE,+BACKU,KADL;AAEEJ,QAAAA,QAAQ,EAAEK,MAAM,CAACE;AAFnB;;AAIF,SAAKZ,QAAL;AACE,+BACKS,KADL;AAEEH,QAAAA,IAAI,EAAEI,MAAM,CAACJ;AAFf;;AAIF,SAAKH,mBAAL;AACE,+BACKM,KADL;AAEEF,QAAAA,WAAW,EAAE;AAFf;;AAIF,SAAKN,WAAL;AACE,+BACKQ,KADL;AAEEJ,QAAAA,QAAQ,EAAE,CACR,GAAGI,KAAK,CAACJ,QAAN,CAAeQ,IAAf,CAAoB,CAACC,CAAD,EAAIC,CAAJ,KACrBD,CAAC,CAACJ,MAAM,CAACM,GAAR,CAAD,CAAcC,WAAd,KAA8BF,CAAC,CAACL,MAAM,CAACM,GAAR,CAAD,CAAcC,WAAd,EAA9B,GACI,CADJ,GAEIF,CAAC,CAACL,MAAM,CAACM,GAAR,CAAD,CAAcC,WAAd,KAA8BH,CAAC,CAACJ,MAAM,CAACM,GAAR,CAAD,CAAcC,WAAd,EAA9B,GACA,CAAC,CADD,GAEA,CALH,CADK;AAFZ;;AAYF,SAAKf,aAAL;AACE,+BACKO,KADL;AAEEJ,QAAAA,QAAQ,EAAE,CACR,GAAGI,KAAK,CAACJ,QAAN,CAAeQ,IAAf,CAAoB,CAACC,CAAD,EAAIC,CAAJ,KACrBA,CAAC,CAACL,MAAM,CAACM,GAAR,CAAD,CAAcC,WAAd,KAA8BH,CAAC,CAACJ,MAAM,CAACM,GAAR,CAAD,CAAcC,WAAd,EAA9B,GACI,CADJ,GAEIH,CAAC,CAACJ,MAAM,CAACM,GAAR,CAAD,CAAcC,WAAd,KAA8BF,CAAC,CAACL,MAAM,CAACM,GAAR,CAAD,CAAcC,WAAd,EAA9B,GACA,CAAC,CADD,GAEA,CALH,CADK;AAFZ;;AAYF;AACE,aAAOR,KAAP;AA3CJ;AA6CD,CA9CD;;AAgDA,eAAeD,OAAf;AAEA,OAAO,MAAMU,WAAW,GAAG,MAAMC,QAAQ,IAAI;AAC3C,SAAOrB,OAAO,CAACsB,OAAR,GAAkBC,IAAlB,CAAuBC,QAAQ,IAAI;AACxC,QAAIA,QAAQ,CAACC,MAAT,KAAoB,GAAxB,EAA6B;AAC3BJ,MAAAA,QAAQ,CAACK,OAAO,CAACC,MAAM,CAACnB,IAAP,CAAYgB,QAAQ,CAACV,IAAT,CAAc,CAAd,CAAZ,CAAD,CAAR,CAAR;AACAO,MAAAA,QAAQ,CAACO,OAAO,CAACJ,QAAQ,CAACV,IAAV,CAAR,CAAR;AACD;AACF,GALM,CAAP;AAMD,CAPM;AASP,OAAO,MAAMe,aAAa,GAAG,MAAMR,QAAQ,IAAI;AAC7C,QAAMS,OAAO,GAAGT,QAAQ,CAACD,WAAW,EAAZ,CAAxB;AACAW,EAAAA,OAAO,CAACC,GAAR,CAAY,CAACF,OAAD,CAAZ,EAAuBP,IAAvB,CAA4B,MAAM;AAChCF,IAAAA,QAAQ,CAACY,kBAAkB,EAAnB,CAAR;AACD,GAFD;AAGD,CALM","sourcesContent":["import { dataAPI } from '../api/api';\n\nconst SET_DATA = 'SET_DATA';\nconst SET_KEYS = 'SET_KEYS';\nconst DIRECT_SORT = 'DIRECT_SORT';\nconst REVERSED_SORT = 'REVERSED_SORT';\nconst INITIALIZED_SUCCESS = 'INITIALIZED_SUCCESS';\n\nconst initialState = {\n  profiles: [],\n  keys: [],\n  initialized: false,\n};\n\nconst reducer = (state = initialState, action) => {\n  switch (action.type) {\n    case SET_DATA:\n      return {\n        ...state,\n        profiles: action.data,\n      };\n    case SET_KEYS:\n      return {\n        ...state,\n        keys: action.keys,\n      };\n    case INITIALIZED_SUCCESS:\n      return {\n        ...state,\n        initialized: true,\n      };\n    case DIRECT_SORT:\n      return {\n        ...state,\n        profiles: [\n          ...state.profiles.sort((a, b) =>\n            a[action.key].toLowerCase() > b[action.key].toLowerCase()\n              ? 1\n              : b[action.key].toLowerCase() > a[action.key].toLowerCase()\n              ? -1\n              : 0\n          ),\n        ],\n      };\n    case REVERSED_SORT:\n      return {\n        ...state,\n        profiles: [\n          ...state.profiles.sort((a, b) =>\n            b[action.key].toLowerCase() > a[action.key].toLowerCase()\n              ? 1\n              : a[action.key].toLowerCase() > b[action.key].toLowerCase()\n              ? -1\n              : 0\n          ),\n        ],\n      };\n    default:\n      return state;\n  }\n};\n\nexport default reducer;\n\nexport const getProfiles = () => dispatch => {\n  return dataAPI.getData().then(response => {\n    if (response.status === 200) {\n      dispatch(setKeys(Object.keys(response.data[0])));\n      dispatch(setData(response.data));\n    }\n  });\n};\n\nexport const initializeApp = () => dispatch => {\n  const promise = dispatch(getProfiles());\n  Promise.all([promise]).then(() => {\n    dispatch(initializedSuccess());\n  });\n};\n"]},"metadata":{},"sourceType":"module"}